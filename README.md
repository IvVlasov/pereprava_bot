## Запуск кода


### Конфигурация бота
Создайте файл ".env" в корне проекта. В нем укажите:
```
BOT_TOKEN=... (токен бота, полученный у BotFather)
ADMIN_CHAT_ID=... (chat ID администратора)
CHANNEL_ID=... (chat ID канала, обычно начинается с -1...)
TZ=... (таймзона, например Asia/Yekaterinburg)
```

### Запуск на локальной машине  
На устройстве должен быть установлена версия Python не ниже 3.10.  

Выгрузите проект на устройство любым удобным способом.  
Необходимо зайти в командную строку и перейти в папку с проектом.  
Вводим следующие команды:  

> python3 -m venv env  

Для Windows  
> source env\Scripts\activate  
Для Unix  
> . ./env/bin/activate  

Устанавливаем зависимости  
> pip install -r requirements.txt  

На этом шаге убедитесь, что конфиг-файл настроен, после этого введите:  
> python main.py  

Бот запущен и работает на локальной машине.  

##### Перезапуск бота на локальной машине  
Нажмите сочетание клавиш Ctrl +  C находясь в командной строке, и заново введите  
> python main.py  

### Запуск на сервере

Убедитесь, что сервер использует ОС Ubuntu 20.04 или 22.04

Зайдите на сервер по SSH доступу. И выполните следующие команды:

> apt install -y git python3.10 python3-venv

> git clone https://github.com/IvVlasov/pereprava_bot

> cd pereprava_bot

Далее необходимо настроить конфигурацию в файле .env
Сделать это можно с помощью консольного редактора (nano/vim), либо же через доступ по FTP

После полной настройки конфигурации, вернитесь в папку проекта и введите

> . ./deployment/run.sh

Готово, бот развёрнут и запущен на сервере.

##### Перезапуск бота на сервере
Находясь на сервере (по ssh) введите:
>systemctl restart bot.service


#### Административная панель

Для входа в админ-панель бота введите /admin
бот пришлет excel файл с настройками. Исправьте файл настроек и пришлите excel обратно в бота.
